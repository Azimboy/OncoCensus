@import views.html.reports
@import org.webjars.play.WebJarsUtil

@()(implicit webJarsUtil: WebJarsUtil)

@reports.main("OncoCensus"){
  @Html(webJarsUtil.script("twbs-pagination/1.2.5/jquery.twbsPagination.min.js"))
  <script src="@routes.Assets.versioned("javascripts/reports.js")"></script>

  <div class="row no-margin-left no-margin-right">
    <div class="col-sm-6 widget-container-col no-padding-left" id="widget-container-col-1">
      <div class="widget-box transparent" id="widget-box-1">
        <div class="widget-header">
          <h4 class="widget-title lighter">QIDIRISH SHARTI</h4>

          <div class="widget-toolbar no-border">
            <a href="#" data-action="settings">
              <i class="ace-icon fa fa-cog"></i>
            </a>

            <a href="#" data-action="reload">
              <i class="ace-icon fa fa-refresh"></i>
            </a>

            <a href="#" data-action="collapse">
              <i class="ace-icon fa fa-chevron-up"></i>
            </a>
          </div>
        </div>

        <div class="widget-body">
          <div class="widget-main">
            <div class="form-group row">
              <div class="row">
                <label for="dateRange" class="col-sm-3">Sana</label>
                <div class="col-sm-9" id="dateRange">
                  <div class="row">
                    <div class="col-xs-6">
                      <div class="input-group date" id="startDate" data-bind="datetimepicker: vm.reportData.startDate,
                        dateTimePickerOptions: {pickTime: true}">
                        <input type='text' class="form-control" data-bind="value: vm.reportData.startDate"/>
                        <span class="input-group-addon">
                          <span class="fa fa-calendar"></span>
                        </span>
                      </div>
                    </div>
                    <div class="col-xs-6">
                      <div class="input-group date" id="endDate" data-bind="datetimepicker: vm.reportData.endDate,
                        dateTimePickerOptions: {pickTime: true}">
                        <input type='text' class="form-control" data-bind="value: vm.reportData.endDate"/>
                        <span class="input-group-addon">
                          <span class="fa fa-calendar"></span>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="space-2"></div>
              <div class="row">
                <label for="by-gender" class="col-xs-3">Jins</label>
                <div class="col-xs-9" id="by-gender">
                  <label>
                    <input type="checkbox" data-bind="checked: vm.filters.isMale" class="ace">
                    <span class="lbl"> Erkak</span>
                  </label>&nbsp;&nbsp;&nbsp;
                  <label>
                    <input type="checkbox" data-bind="checked: vm.filters.isFemale" class="ace">
                    <span class="lbl"> Ayol</span>
                  </label>
                </div>
              </div>
              <div class="space-2"></div>
              <div class="row">
                <label for="by-age" class="col-xs-3">Yosh</label>
                <div class="col-xs-9 form-inline" id="by-age">
                  <div class="form-group">
                    <input type="number" data-bind="value: vm.filters.minAge, valueUpdate: 'keyup keypress'" class="form-control input-sm" min="0" max="100" style="width: 55px;"> &nbsp; dan &nbsp;
                  </div>
                  <div class="form-group">
                    <input type="number" data-bind="value: vm.filters.maxAge, valueUpdate: 'keyup keypress'" class="form-control input-sm" min="0" max="100" style="width: 55px;"> &nbsp; gacha &nbsp;
                  </div>
                </div>
              </div>
              <div class="space-2"></div>
              <div class="row">
                <label for="by-client-group" class="col-xs-3">Klient guruhi</label>
                <div class="col-xs-9 form-inline" id="by-client-group">
                  <select class="form-control input-sm" autocomplete="off" name="regionId" id="regionId"
                  data-bind="options: vm.clientGroups, optionsText: 'name', optionsValue: 'id', value: vm.filters.clientGroupId, optionsCaption: ''">
                  </select>
                </div>
              </div>
              <div class="space-2"></div>
              <div class="row">
                <label for="by-passport-id" class="col-xs-3">Passport â„–</label>
                <div class="col-xs-9 form-inline" id="by-passport-id">
                  <input type="text" class="form-control input-sm" data-bind="value: vm.filters.passportId, valueUpdate: 'keyup keypress'">
                </div>
              </div>
              <div class="space-2"></div>
              <div class="row">
                <label for="by-province" class="col-xs-3">Mahalla</label>
                <div class="col-xs-9 form-inline" id="by-province">
                  <input type="text" class="form-control input-sm" data-bind="value: vm.filters.province, valueUpdate: 'keyup keypress'">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-sm-6 widget-container-col no-padding-left" id="widget-container-col-2">
      <div class="widget-box transparent" id="widget-box-2">
        <div class="widget-header">
          <h4 class="widget-title lighter">HUDUD BO'YICHA</h4>

          <div class="widget-toolbar no-border">
            <a href="#" data-action="settings">
              <i class="ace-icon fa fa-cog"></i>
            </a>

            <a href="#" data-action="reload">
              <i class="ace-icon fa fa-refresh"></i>
            </a>

            <a href="#" data-action="collapse">
              <i class="ace-icon fa fa-chevron-up"></i>
            </a>
          </div>
        </div>

        <div class="widget-body">
          <div class="widget-main">
            <div class="row">
              <label for="region" class="col-sm-3">Viloyat</label>
              <div class="col-sm-5">
                <select class="form-control" autocomplete="off" id="region"
                  data-bind="options: vm.regions, optionsText: 'name', optionsValue: 'id', value: vm.reportData.regionId, optionsCaption: 'Viloyat'">
                </select>
              </div>
            </div>
            <div class="space-2"></div>
            <div class="row">
              <label for="district" class="col-sm-3">Tuman</label>
              <div class="col-sm-5">
                <select class="form-control" autocomplete="off" id="district"
                  data-bind="options: vm.selected.districts, optionsText: 'name', optionsValue: 'id', value: vm.reportData.districtId, optionsCaption: 'Tuman'">
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="alert alert-warning" data-bind="visible: vm.patients().length == 0">
    <span class="text-center text-warning"><span class="fa fa-warning"></span> So'rov bo'yicha ma'lumot topilmadi!</span>
  </div>
  <div data-bind="visible: vm.patients().length > 0">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th colspan="2" class="text-center">Sana</th>
          <th rowspan="2" class="text-center">FIO</th>
          <th rowspan="2">Tug'ulgan yili</th>
          <th rowspan="2">Klient guruhi</th>
          <th colspan="2" class="text-center">Ko'riklar soni</th>
          <th rowspan="2">Yashash manzili</th>
          <th rowspan="2">Ish/O'qish joyi</th>
        </tr>
        <tr>
          <th>Nazoratga olindi</th>
          <th>Nazoratdan chiqarildi</th>
          <th>Poliklinikada</th>
          <th>Uyda</th>
        </tr>
      </thead>
      <tbody data-bind="foreach: vm.patients">
        <tr>
          <td data-bind="text: $root.vm.formatDate($data.createdAt)"></td>
          <td data-bind="text: $data.supervisedOutAt"></td>
          <td data-bind="text: $data.lastName + ' ' + $data.firstName + ' ' + $data.middleName"></td>
          <td data-bind="text: $root.vm.formatDate($data.birthDate, 'DD.MM.YYYY')"></td>
          <td data-bind="text: $data.clientGroup.code"></td>
          <td>0</td>
          <td>0</td>
          <td>
            <span data-bind="text: $data.district.name"></span> tumani,
            <span data-bind="text: $data.patientDataJson.province"></span> mahallasi,
            <span data-bind="text: $data.patientDataJson.street"></span> ko'chasi,
            <span data-bind="text: $data.patientDataJson.home"></span> - uy
          </td>
          <td>
            <span data-bind="text: $data.patientDataJson.work"></span>
            <span data-bind="text: $data.patientDataJson.position"></span>
          </td>
        </tr>
      </tbody>
    </table>
    <ul id="pagination" style="margin: 0px!important;"></ul>
  </div>

}
